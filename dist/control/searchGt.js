!function(a,b,c){b.control.set({name:"searchGt",par:"type/state",tem:["top_second","search_place"],fn:function(c){function d(d,e){var f=["选择出发地","选择目的地"],g=_.template(c.tem[0])({left:"",center:f[c.type]});a("#head").html(g),a("#head .leftButton").unbind("tap").bind("tap",function(){window.history.go(-1)});var h=_.template(c.tem[1])(e);a("#scroller").html(h),a("#scroller .list").css("width","100%"),a(".top_third .leftButton").unbind("tap").bind("tap",function(){window.history.go(-1)}),a(".point").unbind("tap").bind("tap",function(){"4"===c.state?(console.log(a(this).attr("pid")),b.cache("client_id",{id:a(this).attr("pid")}),console.log(b.cache("client_id")),window.history.go(-1)):(a(".point").removeClass("hl"),a(this).addClass("hl"),b.api.run("place_id_get","at="+d+"&pen="+a(this).attr("value"),function(a){window.location.hash="travelIndex/"+c.type+"/"+(Number(c.state)+1)+"/"+a},function(a){b.pop.on("alert",{text:JSON.stringify(a)})}))});setTimeout(function(){},200);a("img").load(function(){})}function e(e,f,g,h){var i={input:!0,title:!0,now:g.s,place:{}};"4"===c.state?(i.place.a={title:"",main:[]},a.each(g.as,function(a,b){var c=b.split(",");i.place.a.main.push({name:c[0],id:c[1],type:c[2]})}),d(e,i)):b.api.run("search_place_get","at="+e,function(b){"1"===c.type&&(i.now=!1),a.each(b[Number(c.state)+1],function(b,c){i.place["place"+b]={title:c.name,main:[]},a.each(c.member,function(a,c){i.place["place"+b].main.push({name:c.name,id:"",type:c.type})})}),d(e,i)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}function f(a,c,d){b.api.run("province_getAll","at="+a,function(b){e(a,c,d,b)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}function g(a,c){b.api.run("client_get","at="+a+"&s="+(b.cache("client_id").id||""),function(b){f(a,c,b)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}function h(a){b.api.run("city_get_now","at="+a,function(b){g(a,b)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}b.api.at(h)}})}($,app,config);