!function(a,b,c){b.control.set({name:"searchGt",par:"type/state",tem:["top_second","search_place"],fn:function(c){function d(d,e){var f=["选择出发地","选择目的地"],g=_.template(c.tem[0])({left:"",center:f[c.type]});a("#head").html(g),a("#head .leftButton").unbind("click").bind("click",function(){window.history.go(-1)});var h=_.template(c.tem[1])(e);a("#scroller").html(h),a("#scroller .list").css("width","100%"),a(".top_third .leftButton").unbind("tap").bind("tap",function(){window.history.go(-1)}),a(".point").unbind("tap").bind("tap",function(){a(".point").removeClass("hl"),a(this).addClass("hl"),b.api.run("place_id_get","at="+d+"&pen="+a(this).attr("value"),function(a){window.location.hash="travelIndex/"+c.type+"/"+(Number(c.state)+1)+"/"+a},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})});setTimeout(function(){myScroll.refresh()},200);a("img").load(function(){myScroll.refresh()})}function e(e,f,g){b.api.run("search_place_get","at="+e,function(b){var g={input:!0,title:!0,now:f.c,place:{}};"1"===c.type&&(g.now=!1),a.each(b[Number(c.state)+1],function(b,c){g.place["place"+b]={title:c.name,main:[]},a.each(c.member,function(a,c){g.place["place"+b].main.push({name:c.name,id:"",type:c.type})})}),d(e,g)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}function f(a,c){b.api.run("province_getAll","at="+a,function(b){e(a,c,b)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}function g(a){b.api.run("city_get_now","at="+a,function(b){f(a,b)},function(a){b.pop.on("alert",{text:JSON.stringify(a)})})}b.api.at(g)}})}($,app,config);